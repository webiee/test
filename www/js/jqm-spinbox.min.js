/*
 * jQuery Mobile Framework : plugin to provide a number spinner.
 * Copyright (c) JTSage
 * CC 3.0 Attribution.  May be relicensed without permission/notification.
 * https://github.com/jtsage/jquery-mobile-spinbox
 */
/*(function(a){a.widget("mobile.spinbox",a.mobile.widget,{options:{dmin:false,dmax:false,theme:false,initSelector:"input[data-role='spinbox']",clickEvent:"vclick",type:"vertical",},_create:function(){var b=this,c,f=a.extend(this.options,this.element.jqmData("options")),e={input:this.element,wrap:this.element.parent()};b.d=e;if(b.d.input.jqmData("mini")===true){b.d.input.addClass("ui-mini")}b.d.wrap.removeClass("ui-input-text ui-shadow-inset ui-btn-shadow").addClass("ui-controlgroup ui-controlgroup-"+f.type);if(f.type==="horizontal"){b.d.wrap.css({display:"inline",whiteSpace:"nowrap",border:"none"});if(b.d.input.jqmData("mini")===true){b.d.input.css({width:"30px"})}else{b.d.input.css({width:"40px"})}}else{b.d.input.css({width:"30px"});b.d.wrap.css({width:"auto",display:"inline-block",border:"none"})}b.d.input.css({textAlign:"center",borderRadius:"0px"});if(f.theme===false){f.theme=a(this).closest("[data-theme]").attr("data-theme");if(typeof f.theme==="undefined"){f.theme="c"}}if(f.dmin===false){f.dmin=(typeof b.d.input.attr("min")!=="undefined")?parseInt(b.d.input.attr("min"),10):Number.MAX_VALUE*-1}if(f.dmax===false){f.dmax=(typeof b.d.input.attr("max")!=="undefined")?parseInt(b.d.input.attr("max"),10):Number.MAX_VALUE}b.d.up=a("<div>").buttonMarkup({icon:"plus",theme:f.theme,iconpos:"notext",corners:true,shadow:false,inline:f.type==="horizontal"}).css({borderTopLeftRadius:"5px",borderTopRightRadius:"5px",marginLeft:"0px",marginBottom:"0px",marginTop:"0px",paddingLeft:f.type==="horizontal"});b.d.down=a("<div>").buttonMarkup({icon:"minus",theme:f.theme,iconpos:"notext",corners:true,shadow:false,inline:f.type==="horizontal"}).css({borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",marginRight:"0px",marginBottom:"0px",marginTop:"0px",paddingRight:f.type==="horizontal"?".0em":"0px"});if(f.type==="horizontal"){b.d.down.prependTo(b.d.wrap);b.d.up.appendTo(b.d.wrap)}else{b.d.up.prependTo(b.d.wrap);b.d.down.appendTo(b.d.wrap)}a.mobile.behaviors.addFirstLastClasses._addFirstLastClasses(b.d.wrap.find(".ui-btn"),b.d.wrap.find(".ui-btn"),true);b.d.up.on(f.clickEvent,function(d){d.preventDefault();if(!b.disabled){c=parseInt(b.d.input.val(),10)+1;if(c<=f.dmax){b.d.input.val(c);b.d.input.trigger("change")}}});b.d.down.on(f.clickEvent,function(d){d.preventDefault();if(!b.disabled){c=parseInt(b.d.input.val(),10)-1;if(c>=f.dmin){b.d.input.val(c);b.d.input.trigger("change")}}});if(typeof a.event.special.mousewheel!=="undefined"){b.d.input.on("mousewheel",function(g,h){g.preventDefault();if(!b.disabled){c=parseInt(b.d.input.val(),10)+((h<0)?-1:1);if(c>=f.dmin&&c<=f.dmax){b.d.input.val(c);b.d.input.trigger("change")}}})}},disable:function(){this.d.input.attr("disabled",true);this.d.input.addClass("ui-disabled").blur();this.disabled=true},enable:function(){this.d.input.attr("disabled",false);this.d.input.removeClass("ui-disabled");this.disabled=false}});a(document).bind("pagecreate create",function(b){a.mobile.spinbox.prototype.enhanceWithin(b.target,true)})})(jQuery);*/

(function(a){a.widget("mobile.spinbox",a.mobile.widget,{options:{dmin:false,dmax:false,step:false,theme:false,repButton:false,version:"1.4.0-2014062900",initSelector:"input[data-role='spinbox']",clickEvent:"vclick",type:"vertical",},_sbox_run:function(){var b=this,c=150;if(b.g.cnt>10){c=100}if(b.g.cnt>30){c=50}if(b.g.cnt>60){c=20}b.g.didRun=true;b._offset(this,b.g.delta);b.g.cnt++;b.runButton=setTimeout(function(){b._sbox_run()},c)},_offset:function(d,c){var b=this,e=this.options;if(!b.disabled){if(c<1){tmp=parseInt(b.d.input.val(),10)-e.step;if(tmp>=e.dmin){b.d.input.val(tmp);b.d.input.trigger("change")}}else{tmp=parseInt(b.d.input.val(),10)+e.step;if(tmp<=e.dmax){b.d.input.val(tmp);b.d.input.trigger("change")}}}},_create:function(){var b=this,c,g=a.extend(this.options,this.element.jqmData("options")),f={input:this.element,wrap:this.element.parent()},h=(typeof window.ontouchstart!=="undefined"),e={eStart:(h?"touchstart":"mousedown")+".spinbox",eMove:(h?"touchmove":"mousemove")+".spinbox",eEnd:(h?"touchend":"mouseup")+".spinbox",eEndA:(h?"mouseup.spinbox touchend.spinbox touchcancel.spinbox touchmove.spinbox":"mouseup.spinbox"),move:false,start:false,end:false,pos:false,target:false,delta:false,tmp:false,cnt:0};b.d=f;b.g=e;if(b.d.input.jqmData("mini")===true){b.d.input.addClass("ui-mini")}b.d.wrap.removeClass("ui-input-text ui-shadow-inset ui-btn-shadow").addClass("ui-controlgroup ui-controlgroup-"+g.type);if(g.type==="horizontal"){b.d.wrap.css({display:"inline-block",whiteSpace:"nowrap",border:"1px solid #e5e5e5",borderRadius:"0px"});b.d.input.css({display:"inline-block"});if(b.d.input.jqmData("mini")===true){b.d.input.css({width:"50px"})}else{b.d.input.css({width:"40px"})}}else{b.d.input.css({width:"45px"});b.d.wrap.css({width:"45px",display:"inline-block"})}b.d.input.css({textAlign:"center",padding:"0px 0px 4px 0px",border:"0px",fontWeight:"500",borderTop:"0px solid #f0f0f0",borderBottom:"0px solid #f0f0f0"});if(g.theme===false){g.theme=a(this).closest("[data-theme]").attr("data-theme");if(typeof g.theme==="undefined"){g.theme="d"}}if(g.dmin===false){g.dmin=(typeof b.d.input.attr("min")!=="undefined")?parseInt(b.d.input.attr("min"),10):Number.MAX_VALUE*-1}if(g.dmax===false){g.dmax=(typeof b.d.input.attr("max")!=="undefined")?parseInt(b.d.input.attr("max"),10):Number.MAX_VALUE}if(g.step===false){g.step=(typeof b.d.input.attr("step")!=="undefined")?parseInt(b.d.input.attr("step"),10):1}b.d.up=a("<div>").buttonMarkup({icon:"plus",theme:g.theme,iconpos:"notext",corners:false,shadow:false,inline:g.type==="horizontal"}).css({marginLeft:"0px",marginBottom:"0px",marginTop:"0px",border:"0px",borderRadius:"0px 0px 0px 0px",padding:"3px 0px",paddingLeft:g.type==="horizontal"});b.d.down=a("<div>").buttonMarkup({icon:"minus",theme:g.theme,iconpos:"notext",corners:false,shadow:false,inline:g.type==="horizontal"}).css({border:"0px",borderRadius:"0px 0px 0px 0px",padding:"3px 0px",marginRight:"0px",marginBottom:"0px",marginTop:"0px",paddingRight:g.type==="horizontal"?".4em":"0px"});if(g.type!=="horizontal"){b.d.down.css({width:"auto"});b.d.up.css({width:"auto"})}a.mobile.behaviors.addFirstLastClasses._removeFirstLastClasses(b.d.wrap.find(".ui-btn"),b.d.wrap.find(".ui-btn"),true);if(g.type==="horizontal"){b.d.down.prependTo(b.d.wrap);b.d.up.appendTo(b.d.wrap);b.d.down.addClass("ui-last-child");b.d.up.addClass("ui-first-child")}else{b.d.up.prependTo(b.d.wrap);b.d.down.appendTo(b.d.wrap);b.d.up.addClass("ui-last-child");b.d.down.addClass("ui-first-child")}if(g.repButton===false){b.d.up.on(g.clickEvent,function(d){d.preventDefault();b._offset(d.currentTarget,1)});b.d.down.on(g.clickEvent,function(d){d.preventDefault();b._offset(d.currentTarget,-1)})}else{console.log(b.g);b.d.up.on(b.g.eStart,function(d){b.d.input.blur();b._offset(d.currentTarget,1);b.g.move=true;b.g.cnt=0;b.g.delta=1;if(!b.runButton){b.g.target=d.currentTarget;b.runButton=setTimeout(function(){b._sbox_run()},500)}});b.d.down.on(b.g.eStart,function(d){b.d.input.blur();b._offset(d.currentTarget,1);b.g.move=true;b.g.cnt=0;b.g.delta=-1;if(!b.runButton){b.g.target=d.currentTarget;b.runButton=setTimeout(function(){b._sbox_run()},500)}});b.d.up.on(b.g.eEndA,function(d){if(b.g.move){d.preventDefault();clearTimeout(b.runButton);b.runButton=false;b.g.move=false}});b.d.down.on(b.g.eEndA,function(d){if(b.g.move){d.preventDefault();clearTimeout(b.runButton);b.runButton=false;b.g.move=false}})}if(typeof a.event.special.mousewheel!=="undefined"){b.d.input.on("mousewheel",function(i,j){i.preventDefault();if(!b.disabled){c=parseInt(b.d.input.val(),10)+((j<0)?-1:1);if(c>=g.dmin&&c<=g.dmax){b.d.input.val(c);b.d.input.trigger("change")}}})}},disable:function(){this.d.input.attr("disabled",true);this.d.input.addClass("ui-disabled").blur();this.disabled=true},enable:function(){this.d.input.attr("disabled",false);this.d.input.removeClass("ui-disabled");this.disabled=false}});a(document).bind("pagecreate create",function(b){a(":jqmData(role='spinbox')",b.target).each(function(){var c=typeof(a(this).data("mobile-spinbox"));if(c==="undefined"){a(this).spinbox()}})})})(jQuery);